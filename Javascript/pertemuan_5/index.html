<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitur Toko Online</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
</head>
<body class="bg-light">
    <nav class="navbar navbar-dark shadow-sm sticky-top bg-dark">
      <div class="container-fluid">
        <span class="navbar-brand mb-0 h1 mx-5">Fitur Toko Online</span>
      </div>
    </nav>

    <div class="container mt-4 mb-3 min-vh-100">
        <div class="row">
            <div class="col-lg-4">
                <div class="d-grid bg-white p-4 card shadow mb-3">
                    <p><b><i class="bi bi-plus-circle-fill text-success"></i>&nbsp;Tambah Produk</b></p>
                    <label for="namaProduk" class="mb-2">Nama Produk</label>
                    <input type="text" class="form-control mb-3" id="namaProduk" placeholder="Masukan Nama Produk" required>
                    <label for="hargaProduk" class="mb-2">Harga Produk</label>
                    <input type="number" class="form-control mb-4" id="hargaProduk" placeholder="Masukan Harga Produk" required>
                    <button class="btn btn-success" id="tambahProdukBtn"><i class="bi bi-plus"></i>&nbsp;Tambahkan Produk</button>
                </div>
            </div>

            <div class="col-lg-8 min-vh-100">
                <div class="bg-white p-4 card shadow mb-3 h-100">
                    <p class="m-0"><b><i class="bi bi-box-fill text-primary"></i>&nbsp;Daftar Produk</b></p>
                    <div id="listProduk" class="mb-3">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nama Produk</th>
                                    <th>Harga Produk</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="listPrdk">
                                <!-- Data produk akan ditambahkan di sini -->
                            </tbody>
                        </table>
                        <div class="text-center py-5" id="pesanDataKosong">
                            <h5 class="text-muted mb-3">( Tidak ada data produk )</h5>
                            <button class="btn btn-primary" onclick="tampilkanProduk()" type="reset">Tampilkan Produk</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="bg-dark text-white text-center p-3 mt-4">
      <p>Dibuat oleh <b>Ihsan Ahmad Al-Ghifari</b> | STT Terpadu Nurul Fikri</p>
      <a href="https://www.linkedin.com/in/ihsan-ahmad-al-ghifari-300736293/" class="text-white ms-2" target="_blank"><i class="bi bi-linkedin"></i></a>
      <a href="https://www.instagram.com/dltks_dkfrl?igsh=aGUyM2lxbnZyMm91" class="text-white ms-2" target="_blank"><i class="bi bi-instagram"></i></a>
      <a href="https://github.com/Ialghi" class="text-white ms-2" target="_blank"><i class="bi bi-github"></i></a>
    </div>

    <script>
        // array of object list produk
        let listProduk =[
            {id:1, nama:"Laptop", harga:15000000},
            {id:2, nama:"Smartphone", harga:5000000},
            {id:3, nama:"Tablet", harga:2000000},
            {id:4, nama:"Printer", harga:1500000},
            {id:5, nama:"Smartwatch", harga:800000}
        ];

        // fungsi untuk menampilkan produk
        function tampilkanProduk() {
            const tbody = document.getElementById('listPrdk');
            tbody.innerHTML = '';

            for (const {id, nama, harga} of listProduk) { //loop for dengan destructuring untuk mengambil nilai dari object
                const baris = document.createElement('tr');
                baris.innerHTML = `
                <td>${id}</td>
                <td>${nama}</td>
                <td>Rp ${harga.toLocaleString()}</td>
                <td>
                    <button class="btn btn-outline-danger btn-sm" onclick="hapusProduk(${id})"><i class="bi bi-trash3-fill"></i></button> 
                </td>`;
                tbody.appendChild(baris);
            }
            document.getElementById('pesanDataKosong').style.display = 'none'; // menyembunyikan pesan data kosong
        }

        function  tambahProduk(id, nama, harga) { // fungsi untuk menambah produk baru
            const produkBaru = {id, nama, harga};
            listProduk = [...listProduk, produkBaru]; //memasukan produk baru ke array listProduk menggunakan spread operator
            if (document.getElementById('pesanDataKosong').style.display == 'none') { 
                tampilkanProduk();
                // jika pesan data kosong sudah disembunyikan maka data dapat di tampilkan kembali
            }
        }

        const tambahProdukBtn = document.getElementById('tambahProdukBtn'); //mengambil button tambah produk berdasarkan id

        tambahProdukBtn.addEventListener('click', function() { // event listener untuk button tambah produk
            const namaProduk = document.getElementById('namaProduk').value;
            const hargaProduk = Number(document.getElementById('hargaProduk').value);
                
            if (namaProduk && hargaProduk) { // jika input tidak ada yang kosong maka produk dapat ditambahkan
                const idProdukBaru = listProduk.length + 1;
                tambahProduk(idProdukBaru, namaProduk, hargaProduk); // memanggil fungsi tambahProduk()

                // mengosongkan input setelah produk ditambahkan
                document.getElementById('namaProduk').value = '';
                document.getElementById('hargaProduk').value = '';
            }
        });

        function hapusProduk(...id) { //fungsi untuk menghapus produk berdasarkan id menggunakan rest parameter
            listProduk = listProduk.filter(produk => !id.includes(produk.id)); //includes() diggunakan untuk meriksa apakah id dari rest parameter ada di dalam array listProduk
            tampilkanProduk();
        }

    </script>
</body>
</html>
